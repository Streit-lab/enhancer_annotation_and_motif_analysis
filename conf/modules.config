#!/usr/bin/env nextflow

process {
    /*
    *  Process settings
    */

    publishDir  = [
        path: { "${params.outdir}/${task.process.tokenize(':')[-1].toLowerCase()}" },
        mode: 'copy'
    ]

    withName: "MEMESUITE_FIMO" {
        ext.args = [
            "-oc ./fimo_output",
            params.fimo_pval    ? "--thresh ${params.fimo_pval}"
        ].join(' ').trim()
    }

    withName: "BEDTOOLS_GETFASTA" {
        ext.args = "-name"
    }

    withName: "ANNOTATE_MOTIF_HITS" {
        ext.args = "--gene_name_col ${params.gtf_gene_name_col} --gene_id_col ${params.gtf_gene_id_col}"
    }

    withName: "ANNOTATE_PEAKS_TO_GTF" {
        ext.args = "--window ${params.enhancer_window}"
    }
}